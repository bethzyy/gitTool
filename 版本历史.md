# Git GUI 提交工具 - 版本历史

## v1.5.1 (2026-01-03)

### 🔧 Bug 修复

1. **修复配置加载失败问题**
   - **问题**: 初始化时 `log_file` 未初始化就调用 `load_config()`,导致 `'GitGuiApp' object has no attribute 'log_file'` 错误
   - **修复**: 调整初始化顺序,在 `load_config()` 之前初始化 `log_file`

2. **修复配置文件路径检查错误**
   - **问题**: `self.config_file` 是字符串,使用了 `.exists()` 方法 (Path 对象方法)
   - **修复**: 改用 `os.path.exists(self.config_file)`

3. **增强日志记录**
   - 添加详细的配置保存日志,记录每个参数的值
   - 添加详细的配置加载日志,显示加载的每个参数
   - 添加错误堆栈跟踪,方便调试

### 📝 日志示例

**配置保存日志:**
```
[2026-01-03 15:22:07] [INFO] [配置保存] 准备保存配置到: C:\D\CAIE_tool\MyAIProduct\gitTool\user_config.json
[2026-01-03 15:22:07] [INFO] [配置保存] 仓库名称: newYear
[2026-01-03 15:22:07] [INFO] [配置保存] 提交信息: 1st
[2026-01-03 15:22:07] [INFO] [配置保存] 代码路径: C:\D\CAIE_tool\MyAIProduct\newYear
[2026-01-03 15:22:07] [INFO] [配置保存] 分支选择: main
[2026-01-03 15:22:07] [INFO] [配置保存] 自定义分支:
[2026-01-03 15:22:08] [INFO] [配置保存] 安全检查: True
[2026-01-03 15:22:08] [INFO] [配置保存] 配置保存成功
```

**配置加载日志:**
```
[2026-01-03 15:21:52] [INFO] [配置加载] 配置文件路径: C:\D\CAIE_tool\MyAIProduct\gitTool\user_config.json
[2026-01-03 15:21:52] [INFO] [配置加载] 文件是否存在: True
[2026-01-03 15:21:52] [INFO] [配置加载] 成功读取配置文件
[2026-01-03 15:21:52] [INFO] [配置加载] 上次保存时间: 2026-01-03 15:22:53
[2026-01-03 15:21:52] [INFO] [配置加载] ✓ 仓库名称: newYear
[2026-01-03 15:21:52] [INFO] [配置加载] ✓ 提交信息: 1st
[2026-01-03 15:21:52] [INFO] [配置加载] ✓ 代码路径: C:\D\CAIE_tool\MyAIProduct\newYear
[2026-01-03 15:21:52] [INFO] [配置加载] ✓ 分支选择: main
[2026-01-03 15:21:52] [INFO] [配置加载] ✓ 安全检查: True
[2026-01-03 15:21:52] [INFO] [配置加载] ✓ 配置加载完成
```

### 🎯 功能验证

1. ✅ 启动时自动加载上次保存的参数
2. ✅ 点击"提交"按钮时保存参数
3. ✅ 关闭窗口时保存参数
4. ✅ 日志文件记录所有配置保存和加载操作
5. ✅ 打包后 exe 正常工作

---

## v1.5.0 (2026-01-03)

### ✨ 新功能

1. **自动创建远程分支**
   - 当远程分支不存在时,询问用户是否创建
   - 用户确认后自动创建并推送新分支
   - 取消则终止操作

### 🔧 技术实现

- 使用 `messagebox.askyesno()` 显示确认对话框
- `git push -u origin {current_branch}:{target_branch}` 自动创建新分支

---

## v1.4.0 (2025-12-30)

### ✨ 新功能

1. **自动清理临时文件**
   - 删除 Windows 保留设备名 (nul, con, prn, aux, com*, lpt*)
   - 删除常见临时文件 (*.tmp, *.bak, *.swp, Thumbs.db, etc.)
   - 无法删除的文件自动添加到 .gitignore

2. **改进的错误检测**
   - 正确捕获所有 `fatal:` 和 `error:` 消息
   - 消除虚假成功报告

---

## v1.3.0 (初始版本)

### 🎯 核心功能

1. Git GUI 基础功能
2. 安全扫描 (检测 API 密钥等敏感信息)
3. 远程分支选择 (main/master/custom)
4. 后台线程执行
5. 完整的日志系统
